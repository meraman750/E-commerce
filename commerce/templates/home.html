{% extends "base.html" %}
{% load static %}

{% block title %}Products{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/home.css' %}" />

<h2 class="page-title">Products</h2>

<div class="products-grid">
  {% for product in products %}
    <div class="product-card">
      {% if product.image and product.image.url %}
        <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-image" />
      {% else %}
        <div class="product-placeholder">No Image</div>
      {% endif %}

      <div class="product-info">
        <h3 class="product-name">{{ product.name|title }}</h3>
        <p class="product-price">{{ product.price }} birr</p>
        <p class="product-category">{{ product.category }}</p>
      </div>

      <div class="product-actions">
        {% if request.user.is_staff %}
          <a href="{% url 'update_product' product.id %}" class="btn btn-update">Update</a>
          <a href="{% url 'delete_product' product.id %}" class="btn btn-delete">
              Delete
          </a>
        {% elif user.is_authenticated %}
          <form method="post" action="{% url 'add_to_cart' product.id %}" class="add-to-cart-form">
            {% csrf_token %}
            <button type="submit" class="btn btn-cart">Add to Cart</button>
          </form>
        {% endif %}
      </div>
    </div>
  {% empty %}
    <p class="no-products">No products available.</p>
  {% endfor %}
</div>

{% endblock %}

